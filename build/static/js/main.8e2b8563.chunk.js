(this.webpackJsonpobswebcontroller=this.webpackJsonpobswebcontroller||[]).push([[0],{1987:function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n(58),i=n.n(a),s=(n(354),n(94)),o=n(343),l=n(344),u=n.n(l),d=n(28),j=n.n(d),b=n(39),O=n(18),f=n(345),p="SCENES_FETCH",h="SCENES_ERROR",x="PREVIEW_IMAGE_FETCH",g="PREVIEW_IMAGE_ERROR";var m=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{c=setInterval((function(){e.send("TakeSourceScreenshot",{embedPictureFormat:"jpeg",width:800}).then((function(e){n({type:x,payload:e})})).catch((function(e){clearInterval(c),c=void 0,n(G())}))}),1e3)}catch(r){console.log("catched on FetchScenePreview function"+r),n({type:g,payload:r})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v="RECORDING_STATS_FETCH",S="STATS_LOADING",w="RECORDING_ERROR",y="RECORDING_STATS_STOP";var R=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.send("GetRecordingStatus").then((function(e){n({type:v,payload:e})}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),n({type:w,payload:t.t0});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},C="STREAMING_STATS",N="STREAMING_LOADING",E="STREAMING_ERROR",k="STREAMING_STOP";var T="ERROR_OPEN",_="ERROR_CLOSE";var L,I=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:T,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=new(n.n(f).a),B="OBS_CONNECT",A="OBS_DISCONNECT",P="OBS_ERROR";var G=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{F.disconnect(),t({type:A})}catch(n){console.log("Catched on Disconnect function"+n),t({type:P,payload:n.message})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.send("StartStopRecording");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("catched on startStopRecording function "+e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},M=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.send("StartStopStreaming");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Catched on startStopStreaming function"+e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},z=Object(s.b)({obsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isConnected:!1,error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,isConnected:!0,error:null});case A:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,isConnected:!1,error:null});case P:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,isConnected:!1,error:t.payload.message});default:return e}},scenesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,data:[],error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,data:t.payload,error:null});case h:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,data:[],error:t.payload});default:return e}},previewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,image:null,error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,image:t.payload,error:null});case g:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,image:null,error:t.payload});default:return e}},recordingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:{},error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!0,data:{},error:null});case v:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,data:t.payload,error:null});case y:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,data:{},error:null});case w:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,data:{},error:t.payload});default:return e}},streamReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,data:{},error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!0,data:{},error:null});case C:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,data:t.payload,error:null});case E:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,data:{},error:t.payload});case k:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,data:{},error:null});default:return e}},alertReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1,data:{title:"",description:"",icon:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(O.a)(Object(O.a)({},e),{},{isOpen:!0,data:t.payload});case _:return Object(O.a)(Object(O.a)({},e),{},{isOpen:!1,data:{title:"",description:"",icon:""}});default:return e}}}),W=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c;var H=n(32),V=n(59),U=n(23),q=n(7),J=function(){var e=Object(H.c)((function(e){return e.alertReducer})),t=Object(H.b)();return e&&e.isOpen?Object(q.jsx)(U.Notification,{className:"alert",title:e.data.title,description:e.data.description,icon:e.data.icon,onRequestClose:function(){return t(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:_});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}):null},X=n(36),Y=n(37),K=function(){var e=Object(r.useState)(""),t=Object(V.a)(e,2),n=t[0],c=t[1],a=Object(H.b)();return Object(q.jsxs)("div",{className:"d-flex flex-column justify-content-center vh-100 align-items-center",children:[Object(q.jsx)(J,{}),Object(q.jsx)(U.Card,{className:"w-50",title:"Establish Connection",icon:Object(q.jsx)(U.Avatar,{variant:"success",icon:Object(q.jsx)(X.a,{icon:Y.e})}),actions:Object(q.jsx)(U.ButtonIcon,{onClick:function(){return a(I({title:"Soon",description:"Here you will have the option to choose a color theme but still a work in progress",icon:"info"}))},variant:"neutral",icon:Object(q.jsx)(X.a,{icon:Y.b})}),children:Object(q.jsx)("div",{className:"w-100 d-flex flex-column align-items-center",children:Object(q.jsxs)("div",{className:"w-50 d-flex flex-column margin-3",children:[Object(q.jsx)(U.Input,{className:"address-input",value:n,isCentered:!0,label:"Host address",onChange:function(e){return c(e.target.value)}}),Object(q.jsx)(U.Button,{variant:"brand",onClick:function(){a(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{F.connect({address:"".concat(e,":4444")}).then((function(e){var t;n({type:B}),n((t=F,function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.send("GetSceneList").then((function(e){return n({type:p,payload:e}),!0}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),n({type:h,payload:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}())),n(m(F)),F.send("GetRecordingStatus").then((function(e){e.isRecording&&(L=setInterval((function(){return n(R(F))}),1e3))})),F.on("RecordingStarted",(function(){L||(L=setInterval((function(){return n(R(F))}),1e3))})),F.on("RecordingStopped",(function(){clearInterval(L),L=void 0,n({type:y})})),F.on("StreamStatus",(function(e){n({type:C,payload:e}),console.log(e)})),F.on("StreamStopped",(function(){n({type:k}),console.log("stream stop")})),F.on("ConnectionClosed",(function(){n(I({title:"Disconnected",description:"The connection has been closed",icon:"warning"})),n({type:A})})),F.on("error",(function(e){n(I({title:e.error,description:e.description,icon:"error"}))}))})).catch((function(e){return console.log(e),n(I({title:e.error,description:e.description,icon:"error"})),e}))}catch(c){console.log("Catched on Connect function"+c),n({type:P,payload:c})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))},children:"Connect"})]})})})]})},Q=function(){var e=Object(H.c)((function(e){return e.scenesReducer.data})),t=Object(r.useState)(""),n=Object(V.a)(t,2),c=n[0],a=n[1],i=Object(H.b)();return Object(r.useEffect)((function(){a(e.currentScene)}),[e]),void 0===e.scenes?Object(q.jsx)(U.Spinner,{size:"large",type:"arc",variant:"brand"}):Object(q.jsx)("div",{className:"h-100 overflow-auto",children:Object(q.jsx)(U.VisualPicker,{id:"visual-picker",value:c,onChange:function(e){var t;a(e),i((t=e,function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.send("SetCurrentScene",{"scene-name":t}).then((function(e){return console.log(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Catched on setCurrentScene function"+e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()))},className:"overflow-auto",children:e.scenes.map((function(e,t){return Object(q.jsxs)(U.VisualPickerOption,{name:e.name,children:[Object(q.jsx)(X.a,{style:{marginBottom:"0.25em"},icon:Y.d,size:"3x"}),e.name]},t)}))})})},Z=function(){var e=Object(H.c)((function(e){return e.previewReducer}));return e.isLoading?Object(q.jsx)(U.Spinner,{size:"large",variant:"brand",type:"arc"}):e.error?Object(q.jsx)("h3",{children:e.error.description}):Object(q.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:Object(q.jsx)("img",{className:"prev-img",src:e.image.img})})},$=function(){var e=Object(H.c)((function(e){return e.recordingReducer})),t=Object(H.b)();return e.data&&e.data.isRecording?Object(q.jsxs)("div",{className:"flex-grow-1",children:[Object(q.jsxs)("p",{children:[Object(q.jsx)(X.a,{icon:Y.a,className:"breathingAnimation margin-r-05",style:{color:"red"}})," Recording "]}),Object(q.jsxs)("p",{children:["Time: ",e.data.recordTimecode]}),Object(q.jsxs)("p",{children:["Filename: ",e.data.recordingFilename.slice(e.data.recordingFilename.lastIndexOf("/")+1,e.data.recordingFilename.length)]}),Object(q.jsxs)("p",{children:["File Path: ",e.data.recordingFilename.slice(0,e.data.recordingFilename.lastIndexOf("/")+1)]}),Object(q.jsxs)(U.Button,{variant:"destructive",onClick:function(){return t(D())},children:[Object(q.jsx)(X.a,{icon:Y.g,className:"margin-r-1"}),"Stop recording"]})]}):Object(q.jsx)("div",{className:"d-flex flex-column flex-grow-1 align-items-center justify-content-center",children:Object(q.jsxs)(U.Button,{onClick:function(){return t(D())},variant:"brand",children:[Object(q.jsx)(X.a,{icon:Y.c,className:"margin-r-1"}),"Start recording"]})})},ee=function(){var e=Object(H.c)((function(e){return e.streamReducer})),t=Object(H.b)();return e&&e.data.fps?Object(q.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center flex-grow-1 w-100",children:[Object(q.jsxs)("p",{children:[Object(q.jsx)(X.a,{icon:Y.f,className:"margin-r-05 breathingAnimation",style:{color:"red"}}),"Live now"]}),Object(q.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-between w-100",children:[Object(q.jsxs)("div",{className:"text-left stats",children:[Object(q.jsxs)("p",{children:["FPS: ",Math.floor(e.data.fps)]}),Object(q.jsxs)("p",{children:["Streaming time: ",e.data.streamTimecode]}),Object(q.jsxs)("p",{children:["Bitrate: ",e.data.kbitsPerSec,"kb/s"]}),Object(q.jsxs)("p",{children:["Skiped Frames: ",e.data.numDroppedFrames,"/",e.data.numTotalFrames]}),Object(q.jsxs)("p",{children:["Memory: ",parseFloat(e.data.memoryUsage).toFixed(2)]})]}),Object(q.jsxs)("div",{children:[Object(q.jsx)(U.ProgressCircular,{value:parseFloat(e.data.cpuUsage).toFixed(1)}),Object(q.jsx)("p",{children:"CPU ussage"})]})]}),Object(q.jsxs)(U.Button,{variant:"destructive",onClick:function(){return t(M())},children:[Object(q.jsx)(X.a,{icon:Y.g,className:"margin-r-1"}),"Stop Streaming"]})]}):Object(q.jsx)("div",{className:"d-flex flex-column flex-grow-1 align-items-center justify-content-center",children:Object(q.jsxs)(U.Button,{variant:"brand",onClick:function(){return t(M())},children:[Object(q.jsx)(X.a,{className:"margin-r-1",icon:Y.f}),"Start Sreaming"]})})},te=function(){var e=Object(H.b)();return Object(q.jsxs)("div",{children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("img",{src:"icon.png",alt:"obs icon",style:{width:"150px",height:"auto"}}),Object(q.jsx)("h2",{children:"OBS remote controller"}),Object(q.jsxs)("p",{children:["Developed by ",Object(q.jsx)("a",{href:"https://github.com/wilsoft-gt",target:"_blank",children:"wilsoft-gt"})]}),Object(q.jsxs)("p",{children:["You can check the source code on ",Object(q.jsx)("a",{href:"https://github.com/wilsoft-gt/OBSWebController",target:"_blank",children:"here"})]})]}),Object(q.jsx)("div",{children:Object(q.jsx)("h2",{children:"Theme chooser will be here"})}),Object(q.jsxs)(U.Button,{variant:"destructive",onClick:function(){return e(G())},children:[Object(q.jsx)(X.a,{icon:Y.h,className:"margin-r-05"}),"Disconnect"]})]})},ne=function(){window.onResize=function(e){return console.log(e)};Object(H.b)();var e=Object(r.useState)(window.innerWidth),t=Object(V.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)("stream"),i=Object(V.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(!1),u=Object(V.a)(l,2),d=u[0],j=u[1];return Object(r.useEffect)((function(){window.addEventListener("resize",(function(e){c(window.innerWidth)}))}),[]),Object(q.jsxs)(U.Card,{icon:n>768?Object(q.jsx)(U.Avatar,{size:"small",src:"icon.png"}):null,title:n>768?"Connected":null,actions:n>768?Object(q.jsxs)(U.Button,{variant:"success",size:"small",onClick:function(){return j(!0)},children:[Object(q.jsx)(X.a,{className:"margin-r-05",icon:Y.b}),"Settings"]}):null,className:"d-flex flex-column flex-grow-1 vh-100",children:[Object(q.jsx)(J,{}),Object(q.jsx)(U.Modal,{isOpen:d,onRequestClose:function(){return j(!1)},title:"Settings",icon:Object(q.jsx)(X.a,{icon:Y.b}),children:Object(q.jsx)(te,{})}),Object(q.jsx)(Z,{}),Object(q.jsxs)("div",{className:"d-flex flex-grow-1 overflow-auto",children:[n>768?Object(q.jsx)(U.Card,{title:"Choose the scene",className:"w-50",children:Object(q.jsx)(Q,{})}):"",Object(q.jsxs)(U.Card,{className:"d-flex flex-column justify-content-center align-items center w-50 flex-grow-1",children:[Object(q.jsxs)(U.Tabset,{fullWidth:!0,className:"w-100",variant:"line",id:"tabset",onSelect:function(e,t){return o(t)},activeTabName:s,children:[n<768?Object(q.jsx)(U.Tab,{name:"scenes",label:Object(q.jsxs)("span",{children:[Object(q.jsx)(X.a,{icon:Y.d})," Scenes"]})}):null,Object(q.jsx)(U.Tab,{name:"stream",label:Object(q.jsxs)("span",{children:[Object(q.jsx)(X.a,{icon:Y.f})," Stream"]})}),Object(q.jsx)(U.Tab,{name:"record",label:Object(q.jsxs)("span",{children:[Object(q.jsx)(X.a,{icon:Y.c})," Record"]})})]}),{stream:Object(q.jsx)(ee,{}),record:Object(q.jsx)($,{}),scenes:Object(q.jsx)(Q,{})}[s]]})]}),n<768?Object(q.jsx)(U.ButtonIcon,{className:"settingsButton",variant:"success",icon:Object(q.jsx)(X.a,{icon:Y.b,onClick:function(){return j(!d)}})}):null]})},ce=function(){return Object(H.c)((function(e){return e.obsReducer})).isConnected?Object(q.jsx)(ne,{}):Object(q.jsx)(K,{})};function re(){var e=Object(s.d)(z,W(Object(s.a)(o.a,u.a)));return Object(q.jsx)(H.a,{store:e,children:Object(q.jsx)(ce,{})})}var ae=document.getElementById("root");i.a.render(Object(q.jsx)(r.StrictMode,{children:Object(q.jsx)(re,{})}),ae)},257:function(e,t){},354:function(e,t,n){},847:function(e,t){},848:function(e,t){}},[[1987,1,2]]]);
//# sourceMappingURL=main.8e2b8563.chunk.js.map